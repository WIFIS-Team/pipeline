pyCLCompOut = '0'
pyCLCTX = '2'

#specifies whether data is hband or not
hband = False

#likely static
rootFolder = '/data/WIFIS/H2RG-G17084-ASIC-08-319'

#input list/file names
flatLstFile = 'flat.lst'
waveLstFile = 'wave.lst'
obsLstFile = 'obs.lst'
skyLstFile = 'sky.lst'
darkLstFile = 'dark.lst'
darkFile = ''
detLstFile = 'det.lst'
noFlat = False

#sky subtraction options
skySubFirst = True

skyCorRegions = [[0,350]]
#skyCorRegions = [[1025,1045],[1080,1105],[1140,1175],[1195,1245],[1265,1330]]

#options for flexure/pixel shift between sky/obs cubes
skyShiftCor = True
skyShiftOverSample = 20
skyShiftContFit1 = True
skyShiftContFit2 = True
skyShiftnPix = 50
skyShiftContFitOrd = 1
skyShiftMxShift = 4
skyShiftReject = 1
skyShitMaxLevel = 0. #only used for determining which columns to use if subtracting sky at the image level

#options to determine line strength scaling difference between sky and obs cubes
skyScaleCor = True
skyScaleMx = 0.9
skyScaleSigClip = 3
skyScaleSigClipRnds = 1
skyScaleUseMxOnly = 0.2 # only uses pixels with >0.2 of maximum signal for fitting/subtracting

#determine additional RV corrections relative to sky emission template
getSkyCorRV = True
skyEmTempFile = '/data/pipeline/external_data/sky_emission_template.dat'

#telluric correction
tellCor = False

#optional flat field correction to better match cal flats to dome flats
flatCorFile = 'processed/flat_correction_slices.fits'
flatCor = False

#specify calibration files
#if hband:
#waveTempFile = '/data/pipeline/external_data/waveTemplate_hband.fits'
#waveTempResultsFile = '/data/pipeline/external_data/waveTemplate_hband_fitResults.pkl'
#distMapFile = '/home/jason/wifis/data/ronchi_map_june/hband/processed/20170607222050_ronchi_distMap.fits'
#spatGridPropsFile = '/home/jason/wifis/data/ronchi_map_june/hband/processed/20170607222050_ronchi_spatGridProps.dat'

waveTempFile = '/data/pipeline/external_data/waveTemplate.fits'
waveTempResultsFile = '/data/pipeline/external_data/waveTemplateFittingResults.pkl'

#may
#distMapFile = '/home/jason/wifis/data/ronchi_map_may/testing/processed/20170511222022_ronchi_distMap.fits'
#distMapLimitsFile = '/home/jason/wifis/data/ronchi_map_may/testing/processed/20170511223518_flat_limits.fits'
#spatGridPropsFile = '/home/jason/wifis/data/ronchi_map_may/testing/processed/20170511222022_ronchi_spatGridProps.dat'

#june
#distMapFile = '/home/jason/wifis/data/ronchi_map_june/testing/processed/20170611221759_ronchi_distMap.fits'
#distMapLimitsFile = '/home/jason/wifis/data/ronchi_map_june/testing/processed/20170611222844_flat_limits.fits'
#spatGridPropsFile = '/home/jason/wifis/data/ronchi_map_june/testing/processed/20170611221759_ronchi_spatGridProps.dat'

#july
#distMapFile = '/home/jason/wifis/data/ronchi_map_july/tb/processed/20170707175840_ronchi_distMap.fits'
#distMapLimitsFile = '/home/jason/wifis/data/ronchi_map_july/tb/processed/20170707180443_flat_limits.fits'
#spatGridPropsFile = '/home/jason/wifis/data/ronchi_map_july/tb/processed/20170707175840_ronchi_spatGridProps.dat'

#august
distMapFile = '/home/jason/wifis/data/ronchi_map_august/tb/testing/processed/20170831211259_ronchi_distMap.fits'
distMapLimitsFile = '/home/jason/wifis/data/ronchi_map_august/tb/testing/processed/20170831210255_flat_limits.fits'
spatGridPropsFile = '/home/jason/wifis/data/ronchi_map_august/tb/testing/processed/20170831211259_ronchi_spatGridProps.dat'

nlFile = '/home/jason/wifis/data/june_cals/processed/master_detLin_NLCoeff.fits'        
satFile = '/home/jason/wifis/data/june_cals/processed/master_detLin_satCounts.fits'
bpmFile = '/home/jason/wifis/data/june_cals/processed/master_dark_BPM.fits'
atlasFile = '/data/pipeline/external_data/best_lines2.dat'

#bad pixel mask correction range
bpmCorRng = 1

#pixel scale
#may old
xScale = 0.532021532706
yScale = -0.545667026386

#may new
#xScale = 0.529835976681
#yScale = 0.576507533367

#june
#xScale = 0.549419840181
#yScale = -0.581389824133

#wavelength fitting
mxOrder = 3
cleanDispSol = True
waveWinRng=9
#if hband:
#cleanDispThresh = 1.5
#waveTrimThresh=0.25

cleanDispThresh = 1.5
waveTrimThresh = 0
    
sigmaClipRounds=2 #number of iterations when sigma-clipping of dispersion solution
sigmaClip = 2 #sigma-clip cutoff when sigma-clipping dispersion solution
sigmaLimit= 3 #relative noise limit (x * noise level) for which to reject lines

#determine final cube parameters
ndiv = 1
#if ndiv == 0:
#    yScale = yScale*35/18.

crReject = False

#optional behaviour
skipObsinfo = False

#flat field specific options
flatWinRng = 51
flatImgSmth = 5
flatPolyFitDegree=2
flatLimSmth = 20
flatCutOff = 0.1

#parameters for processing darks
getBadPixDark = True
getBadPixRON = True

#parameters for processing the detector linearity data
satLimit=0.97
satThresh=0.97
bpmCutoff=1e-5

#parameters for processing spatial calibrations
ronchiFile = 'ronchi.lst' #expected to be a single entry
ronchiFlatFile = 'ronchiFlat.lst' #expected to be a single entry
zpntFlatFile = 'zpntFlat.lst' #expected to be a single entry
zpntLstFile = 'zpntObs.lst'
zpntSkyFile = 'zpntSky.lst'
zpntNbin=1
zpntBright=True
zpntSmooth=10
zpntWinRng=61
zpntMxChange=5
obsBpmCorRng = 1
zpntFlatCutOff = 0.2

#ronchi tracing parameters
ronchiNbin=1
ronchiWinRng=7
ronchiMxWidth=3
ronchiSmth=20
ronchiBright=False
ronchiPolyOrder=2
ronchiSigmaClipRounds=2

#spatial grid parameters
spatTrim = 0.5

#parameters used for processing of ramps
dispAxis=0
nChannel=32 #specifies the number of channels used during readout of detector
flatbpmCorRng=20 #specifies the maximum separation of pixel search to use during bad pixel correction
nRowsAvg=4 # specifies the number of rows of reference pixels to use to correct for row bias (+/- nRowsAvg)
nRowSplit=1 # specifies how many processing steps to use during reference row correction. Must be integer multiple of number of frames. For very long ramps, use a higher number to avoid OpenCL issues and/or high memory consumption.
nlSplit=32 #specifies how many processing steps to use during non-linearity correction. Must be integer multiple of detector width. For very long ramps, use a higher number to avoid OpenCL issues and/or high memory consumption.
nSatSplit=32 #specifies how many processing steps to use during identification of first saturated frame. Must be integer multiple of detector width. For very long ramps, use a higher number to avoid OpenCL issues and/or high memory consumption.
nCombSplit=32 #specifies how many processing steps to use during creation of ramp image. Must be integer multiple of detector width. For very long ramps, use a higher number to avoid OpenCL issues and/or high memory consumption.
nReadSkip = 0
gain = 1.
ron = 1.


#coordinates
obsCoords = [-111.600444444,31.9629166667,2071]
useSesameCoords=True
